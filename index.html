<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/style2.css">
<link rel="stylesheet" href="css/suna.css">
<script type="text/javascript">

  window.onload = function() {
    var a = document.getElementById("mylink");
    a.onclick = function() {
      console.log("kustība");
      return false;
    }
  }
</script>
</head>
<body>

<div class="header">
  <h1>Burtu spēle</h1>
  <p>Lieliska spēle, lieliskiem panākumiem</p>
</div>

<div class="topnav">
    <a href="index.html"><img class="img_bite_sm" src="img/bite1.gif">sākums</a>
    <a href="spele.html"><img class="img_bite_sm" src="img/bite1.gif">sākt spēli</a>
    <a href="top.html"><img class="img_bite_sm" src="img/bite2.gif">rezultātu tops</a>
    <a href="help.html"><img class="img_bite_sm" src="img/bite3.gif">pamācība</a>
    <a href="login.html"><img class="img_bite_sm" src="img/bite4.gif">reģistrēties</a>
</div>

<div class="row">
  <div class="leftcolumn">
    <div class="card"><a href="spele.html" id="mylink" >
        <div class="sunuLauks">
            <div class="container">
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
                <div class="suna"></div>
            </div>
        </div></a>
    </div>

    <div class="spelesLauks">
      <div class="container2">
        
      </div>  
    </div> 
  </div>
  <div class="rightcolumn">
    <div class="card">
      <h2>Tavi sasniegumi</h2>
      <div class="score"></div>

    </div>
    <div class="card">
      <h3>Rezutatīvākie spēlētāji</h3>
      <div><p>Uzvarētājs 1</p></div>
      <div><p>Uzvarētājs 2</p></div>
      <div><p>Uzvarētājs 3</p></div>
    </div>
    <div class="card">
      <h3>Follow Me</h3>
      <p>Some text..</p>
    </div>
  </div>
</div>

<div class="footer">
  <h2>Nāc rīt atkal spēlēt un uzvarēt... <div class=""></div></h2>
</div>



<script>
  const spelesLauks = document.querySelector('.spelesLauks');
  const sunuLauks = document.querySelector('.sunuLauks');
  const suna = document.querySelector('.suna');
  const btn = document.createElement('button');
 //const redzamieBurti = document.createElement('div');
  const ievadamieBurti = document.createElement('input');
  //const rezultatuTablo = document.createElement('div');
  const rezultatuTablo = document.querySelector('.score');
  const burtuLauks = document.querySelector('.container2');

  //rezultatuTablo.style.color= 'white';
  //rezultatuTablo.style.backgroundColor = 'black';
  //rezultatuTablo.style.padding = '25px';

  ievadamieBurti.setAttribute('type','text');
  ievadamieBurti.classList.add('teksta_ievade');
  //redzamieBurti.style.textAlign = 'center';
  btn.textContent = "SĀKT SPĒLI!";
  //redzamieBurti.style.color = "grey";
  //redzamieBurti.textContent = "Lai sāktu spēli, spied uz šūnu lauka! ";
  //redzamieBurti.style.letterSpacing = '0';
  
  /// pievienojam laukus HTML lapai
  //spelesLauks.append(redzamieBurti);
  spelesLauks.append(ievadamieBurti);
  //spelesLauks.prepend(rezultatuTablo);
  spelesLauks.append(btn);

  const spelesVardi = ['zaķis', 'kaķis', 'pīle'];
  const spele ={izveletaisVards:'', sajauktsVards:'',rezultats:0, nepareizi:0, atlikusieVardi:0, izspeles:spelesVardi.length};
  
  rezultatuTablo.style.display="none";
  ievadamieBurti.style.display = 'none';
  btn.style.display = 'none';    
  
  mylink.addEventListener('click',(e)=>{
    
  jaunsVards();
  });
   //lai uzsāktu spēli bez atsevišķas pogas, vnk uzspiežot uz šūnām
  btn.addEventListener('click',(e)=>{
    var dzestBurtu = document.querySelector('.burts');
    var dzestBurtaLauks = document.querySelector('.burts');
    dzestBurtu.remove();
    dzestBurtaLauks.remove();

  jaunsVards();
  });
  function jaunsVards(){
    
    
      console.log(spelesVardi);
      sunuLauks.style.display = "none";
     
      if(spelesVardi.length<=0){
          console.log ('spēles beigas')
          spelesLauks.innerHTML="<div>Spēles beigas</div>"
          spelesLauks.innerHTML+=`Tu ieguvi ${spele.rezultats}, kļūdījies ${spele.nepareizi}!`;
      }else{

      
      ievadamieBurti.disabled = false;
      ievadamieBurti.value='';
      ievadamieBurti.style.borderWidth='1px';
      ievadamieBurti.style.borderColor="#eee";
      rezultatuTablo.style.display="block";
      ievadamieBurti.style.display = 'inline';
      btn.style.display = 'none';
      ievadamieBurti.focus();
      
      

      spelesVardi.sort(()=>{return 0.5 - Math.random()});
      spele.izveletaisVards= spelesVardi.shift();
      console.log(spelesVardi);
      spele.atlikusieVardi = spelesVardi.length;
      spele.sajauktsVards = burtuJauksana(spele.izveletaisVards);
     
      pievienotRezultatu();
     // redzamieBurti.style.fontSize='3em';
     // redzamieBurti.style.letterSpacing= '0,5em';
      ievadamieBurti.setAttribute('maxlength', spele.izveletaisVards.length);
     // redzamieBurti.textContent = `${spele.sajauktsVards}`;
      spele.atlikusieVardi=spelesVardi.length;
      console.log(spele);
      }
     
  }

  ievadamieBurti.addEventListener('keyup', (e)=>{
      //console.log(e)
      ievadamieBurti.style.borderColor = '#eee';
      ievadamieBurti.style.borderWidth = '1px';
      if (ievadamieBurti.value.length == spele.izveletaisVards.length || e.code == 'Enter'){
          vardaParbaude();
      }
  })
  function pievienotRezultatu(){
      let pagaiduIzvade = `Rezultāts: ${spele.rezultats}. Kļūdainie mēģinājumi ${spele.nepareizi}`;
      rezultatuTablo.innerHTML = pagaiduIzvade;
  }



  function vardaParbaude(){
      ievadamieBurti.style.borderWidth='5px';
      if(ievadamieBurti.value == spele.izveletaisVards){
          ievadamieBurti.style.borderColor='green';
          console.log('sakrīt');
          spele.rezultats++;
          ievadamieBurti.disabled = true;
          btn.style.display='block';
          btn.textContent = 'Nākamais vārds';
         btn.focus();
         
      }else{
          ievadamieBurti.style.borderColor = 'red';
          console.log('nesakrīt');
          ievadamieBurti.value = '';
          ievadamieBurti.focus();
          spele.nepareizi++;
      }
      pievienotRezultatu();
  }



  function burtuJauksana(orginalvards){
      let jauktsVards = orginalvards.split('');
      jauktsVards.sort(()=>{return 0.5 - Math.random()});  
      jauktsVards=jauktsVards.join('');
      console.log(jauktsVards+ ' sauajktais')
      if (orginalvards == jauktsVards){
          console.log('sakrīt');
          return burtuJauksana(orginalvards)
      }
      
      console.log('jauktenis'+jauktsVards);
      var b = jauktsVards; 
      var izmestieBurti=[]; 
                  for (var z = 0; z < b.length; z++) {
                      izmestieBurti.push(b.charAt(z))  
                      const burts = document.createElement('div');
                      const burtaIeraksts = document.createElement('div');
                      burtuLauks.append(burts);
                      burts.append(burtaIeraksts);
                      burts.classList.add('suna');
                      burtaIeraksts.classList.add('burta_lauks');
                      burtaIeraksts.textContent=(b.charAt(z));
                  }
                  return jauktsVards; 
  }


  </script>
</body>
</html>
